"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Route_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Route"));
Route_1.default.post('login', async ({ auth, request, response }) => {
    const email = request.input('email');
    const password = request.input('password');
    try {
        const token = await auth.use('api').attempt(email, password);
        return token;
    }
    catch {
        return response.unauthorized('Invalid credentials');
    }
});
Route_1.default.post('/users', 'UsersController.store');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsb0ZBQTBDO0FBRTFDLGVBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtJQUN4RCxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3BDLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUE7SUFFMUMsSUFBSTtRQUNGLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO1FBQzVELE9BQU8sS0FBSyxDQUFBO0tBQ2I7SUFBQyxNQUFNO1FBQ04sT0FBTyxRQUFRLENBQUMsWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUE7S0FDcEQ7QUFDSCxDQUFDLENBQUMsQ0FBQTtBQUVGLGVBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLHVCQUF1QixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGUgZnJvbSAnQGlvYzpBZG9uaXMvQ29yZS9Sb3V0ZSdcblxuUm91dGUucG9zdCgnbG9naW4nLCBhc3luYyAoeyBhdXRoLCByZXF1ZXN0LCByZXNwb25zZSB9KSA9PiB7XG4gIGNvbnN0IGVtYWlsID0gcmVxdWVzdC5pbnB1dCgnZW1haWwnKVxuICBjb25zdCBwYXNzd29yZCA9IHJlcXVlc3QuaW5wdXQoJ3Bhc3N3b3JkJylcblxuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgYXV0aC51c2UoJ2FwaScpLmF0dGVtcHQoZW1haWwsIHBhc3N3b3JkKVxuICAgIHJldHVybiB0b2tlblxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gcmVzcG9uc2UudW5hdXRob3JpemVkKCdJbnZhbGlkIGNyZWRlbnRpYWxzJylcbiAgfVxufSlcblxuUm91dGUucG9zdCgnL3VzZXJzJywgJ1VzZXJzQ29udHJvbGxlci5zdG9yZScpXG4iXX0=